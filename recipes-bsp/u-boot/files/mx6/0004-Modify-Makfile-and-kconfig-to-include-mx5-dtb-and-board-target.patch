From 79ecf071e793b70f8b93cfb553f2e3a480dbd8ac Mon Sep 17 00:00:00 2001
From: rikardo <rikard.olander@hostmobility.com>
Date: Tue, 15 Feb 2022 09:40:04 +0100
Subject: [PATCH 4/4] Modify Makefile and kconfig to include mx5 dtb and board

---
 arch/arm/dts/Makefile         |  1 +
 arch/arm/mach-imx/mx6/Kconfig | 19 +++++++++++++++++++
 2 files changed, 20 insertions(+)

diff --git a/arch/arm/dts/Makefile b/arch/arm/dts/Makefile
index 24a387fb60..0bde118ca6 100644
--- a/arch/arm/dts/Makefile
+++ b/arch/arm/dts/Makefile
@@ -737,6 +737,7 @@ dtb-y += \
 	imx6qp-sabreauto-gpmi-weim.dtb \
 	imx6qp-sabresd.dtb \
 	imx6qp-wandboard-revd1.dtb \
+	mx5_imx6qp.dtb \
 
 endif
 
diff --git a/arch/arm/mach-imx/mx6/Kconfig b/arch/arm/mach-imx/mx6/Kconfig
index 59a2c61ffd..3cfacf6246 100644
--- a/arch/arm/mach-imx/mx6/Kconfig
+++ b/arch/arm/mach-imx/mx6/Kconfig
@@ -319,6 +319,24 @@ config TARGET_MCCMON6
 	select DM_SPI
 	imply CMD_DM
 
+config TARGET_MX5_IMX6QP
+    bool "mx5 imx6qp"
+	select BOARD_LATE_INIT
+    select DM
+    select DM_THERMAL
+    select IMX_THERMAL
+    select BOARD_EARLY_INIT_F
+    imply CMD_DM
+    depends on MX6QP
+	select DM_MMC
+    select DM_ETH
+    select DM_GPIO
+    select SUPPORT_SPL
+    select MISC
+    select ARCH_MISC_INIT
+    select DM_PMIC
+    select DM_PMIC_PFUZE100
+
 config TARGET_MX6CUBOXI
 	bool "Solid-run mx6 boards"
 	depends on MX6QDL
@@ -973,5 +991,6 @@ source "board/udoo/neo/Kconfig"
 source "board/wandboard/Kconfig"
 source "board/warp/Kconfig"
 source "board/BuR/brppt2/Kconfig"
+source "board/hostmobility/mx5_imx6qp/Kconfig"
 
 endif
-- 
2.17.1

